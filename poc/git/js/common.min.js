var GIT=GIT||{};GIT.utils={init:function(){this.clickables(),this.showNotification("Howdy User..! Welcome to GIT application")},clickables:function(){_self=this,$(".getdata").click(function(){$("#loader").removeClass("hide"),_self.fetchData()}),$(document).on("click",".createissue",function(){var a=$(this).attr("data-issue-url");$(".createissuewrapper").attr("data-issue-url",a).removeClass("hide")}),$(document).on("click",".createissuewrapper .close",function(){$(".title").val(""),$(".description").val(""),$(".createissuewrapper").addClass("hide")}),$(document).on("click",".updateissue",function(){var a=($(this).attr("data-issue-url"),$(".title").val()||"Default Message"),b=$(".description").val()||"Default Description";_self.createissue(a,b)})},fetchData:function(){_self=this;var a=$(".username").val(),b="https://api.github.com/users/"+a,c="https://api.github.com/users/"+a+"/repos",d=$.ajax({url:b,beforeSend:function(a){a.setRequestHeader("Authorization","token 0417d4ce86ff049ddc059d9a16193ec4c0bb1f4c")}});d.done(function(b){if($(".error-container, .result-container").addClass("hide"),"Not Found"==b.message||""==a)$(".error-container").removeClass("hide");else{$("#loader").addClass("hide"),$(".result-container").removeClass("hide");var d=b.name,e=b.avatar_url,f=b.html_url,g=b.name,h=b.followers,i=b.following,j=b.public_repos,k=b.login;void 0===d&&(d=k);var l='<div class="row mb-thirty">';l+='<div class="col-xs-12 col-sm-3">',l=l+'<img src="'+e+'" width="100%" alt="naveenkumarpg"><br/>',l+="</div>",l+='<div class="col-xs-12 col-sm-9">',l=l+'<p>User Name : <a target="_blank" href='+f+">"+k+"</a></p>",l=l+"<p>Name : "+g+"</a></p>",l=l+"<p>Followers : "+h+"</p>",l=l+"<p>Following : "+i+"</p>",l=l+"<p>Repos : "+j+"</p>",l+="</div></div>",_self.getrepos(c,l)}}),d.fail(function(a,b){_self.showNotification("Something went wrong, Please try some time later")})},getrepos:function(a,b){_self=this;var c=$.ajax({url:a,beforeSend:function(a){a.setRequestHeader("Authorization","token 0417d4ce86ff049ddc059d9a16193ec4c0bb1f4c")}});c.done(function(a){_self.outputPageContent(a,b)}),c.fail(function(a,b){_self.showNotification("Something went wrong, Please try some time later")})},outputPageContent:function(a,b){0===a.length?b+="<p>No repos!</p></div>":(b+='<p><strong>Repos List:</strong></p> <table class="table">',$.each(a,function(c){b+='<tr class="repo-row">',b=b+'<td class="number" >'+(c+1)+"</td>",b=b+'<td><a href="'+a[c].html_url+'" target="_blank">'+a[c].name+"</a>",b=b+'<span data-user="'+a[c].owner.login+'" data-issue-url="'+a[c].issues_url+'" class="createissue btn btn-primary">New Issue</span></td>',b+="</tr>"}),b+="</table></div>"),$(".result-container").html(b)},createissue:function(a,b){url=$(".createissuewrapper").attr("data-issue-url").replace("{/number}","");var c={title:a,body:b};$.ajax({url:url,type:"POST",beforeSend:function(a){a.setRequestHeader("Authorization","token 0417d4ce86ff049ddc059d9a16193ec4c0bb1f4c")},data:JSON.stringify(c),complete:function(a){$(".createissuewrapper").addClass("hide"),_self.showNotification("You have sucessfully created the issue on the repository")}})},showNotification:function(a){_self=this,$(".notification").text(a).slideDown(),setTimeout(function(){_self.hidenotification()},2e3)},hidenotification:function(){$(".notification").slideUp(400)}},$(document).ready(function(){GIT.utils.init()});